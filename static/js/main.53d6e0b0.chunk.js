(this.webpackJsonpfrontend2=this.webpackJsonpfrontend2||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),o=(n(25),n(2)),i=n.n(o),l=n(5),u=n(3),p=n(7),d=n.n(p),j=n(6),h="https://api.spotify.com/v1/",b=function(e,t,n){return d()({method:e,url:"https://api.music.apple.com/v1/"+t,headers:{Authorization:"Bearer ".concat(n)}})},f=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,a,r,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("GET","catalog/us/songs?filter[isrc]=".concat(t),j.appleAuth);case 2:return n=e.sent,console.log(n),a=n.data.data.map((function(e){return[e.id,e.attributes.name]})),r={},c=a.filter((function(e){return!r.hasOwnProperty(e[1])&&(r[e[1]]=!0)})),s=c.map((function(e){return{id:e[0],type:"songs"}})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={request:function(e,t,n){return d()({method:e,url:h+t,headers:{Authorization:"Bearer ".concat(n),Accept:"application/json","Content-Type":"application/json"}})},createPlaylist:function(e,t,n){return d()({method:"POST",url:h+t,data:{name:"".concat(e)},headers:{Authorization:"Bearer ".concat(n),Accept:"application/json","Content-Type":"application/json"}})},appleRequest:b,getAppleSongIds:f,createApplePlaylist:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,"playName"),console.log(a,"songIds"),console.log(t,"musicUser"),e.next=5,fetch("https://api.music.apple.com/v1/me/library/playlists",{method:"POST",headers:{authorization:"Bearer "+j.appleAuth,"music-user-token":t},body:JSON.stringify({attributes:{name:n,description:"Created by Playlist Converter"},relationships:{tracks:{data:a}}})});case 5:return r=e.sent,console.log(r),e.abrupt("return",r.json());case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),addAppleSongs:function(){var e=Object(l.a)(i.a.mark((function e(t,n,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),r=fetch("https://api.music.apple.com/v1/me/library/playlists/"+t+"/tracks",{method:"POST",headers:{authorization:"Bearer "+j.appleAuth,"music-user-token":n},body:JSON.stringify({data:a})}),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),fetchApplePlaylists:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,fetch("https://api.music.apple.com/v1/me/library/playlists?limit=100",{method:"GET",headers:{authorization:"Bearer "+j.appleAuth,"music-user-token":t}});case 3:return n=e.sent,e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=n(20),v=(n(44),n(45),n(0));n(47).config();var m=function(){return Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)(x.a,{onClick:function(){window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("52e8d8d4caef421282f7f37369eaa7ea","&redirect_uri=").concat("https://alexoei.github.io/spotifysongrec","&scope=playlist-modify-public%20playlist-modify-private%20user-read-private%20user-read-email%20playlist-read-private%20playlist-read-collaborative&response_type=token&show_dialog=true")},id:"Login",size:"lg",children:" Login to Spotify "})})},y=function(e){var t=e.handleClick,n=e.handleChange,a=e.title;return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{children:a}),Object(v.jsxs)("form",{onSubmit:t,children:[Object(v.jsx)("input",{type:"text",onChange:n}),Object(v.jsx)("input",{type:"submit",value:"submit"})]})]})},g=function(e){var t=e.title,n=e.setName,r=e.setTrack,c=e.token,s=e.setError,o=Object(a.useState)(""),p=Object(u.a)(o,2),d=p[0],j=p[1],h=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.request("GET","search?q=".concat(d,"&type=artist%2Ctrack&limit=5"),c);case 4:a=e.sent,n(a.data.artists),r(a.data.tracks),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),s(!0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"align-content-center",children:Object(v.jsx)(y,{handleClick:h,handleChange:function(e){e.preventDefault(),j(e.target.value)},title:t})})},k=function(e){var t=e.query,n=e.setQuery,a=e.category,r=e.title,c=e.setCounter,s=e.counters;return a?(console.log(a.items),Object(v.jsxs)("div",{children:[Object(v.jsx)("li",{children:r}),Object(v.jsx)("ul",{children:a.items.map((function(e){return Object(v.jsxs)("li",{children:[e.name," ",Object(v.jsx)("img",{src:e.album.images[2].url,alt:"Song Artwork"}),"  ",Object(v.jsx)("button",{onClick:function(){return a=e.id,n(t+a+","),void c(s+1);var a},children:"Add"})]},e.id)}))})]})):Object(v.jsx)("div",{})},w=function(e){var t=e.query,n=e.setQuery,a=e.category,r=e.title,c=e.setCounter,s=e.counters;return a?(console.log(a.items),Object(v.jsxs)("div",{children:[Object(v.jsx)("li",{children:r}),Object(v.jsx)("ul",{children:a.items.map((function(e){return Object(v.jsxs)("li",{children:[e.name," ",Object(v.jsx)("img",{src:e.images[2].url,alt:"Artist Artwork"}),"  ",Object(v.jsx)("button",{onClick:function(){return a=e.id,n(t+a+","),void c(s+1);var a},children:"Add"})]},e.id)}))})]})):Object(v.jsx)("div",{})},S=function(e){var t=e.count,n=e.title;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("p",{children:[n," added: ",t]})})},C=function(e){var t=e.name,n=e.track,r=e.setRecs,c=e.token,s=e.setDoneSearch,o=e.setError,p=Object(a.useState)(""),d=Object(u.a)(p,2),j=d[0],h=d[1],b=Object(a.useState)(""),f=Object(u.a)(b,2),x=f[0],m=f[1],g=Object(a.useState)(0),C=Object(u.a)(g,2),A=C[0],I=C[1],D=Object(a.useState)(0),T=Object(u.a)(D,2),P=T[0],N=T[1],M=Object(a.useState)(20),z=Object(u.a)(M,2),q=z[0],E=z[1],J=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!j&&!x){e.next=15;break}return e.prev=2,e.next=5,O.request("GET","recommendations?limit=".concat(q,"&seed_artists=").concat(x,"&seed_tracks=").concat(j),c);case 5:n=e.sent,console.log(n),r(n.data),s(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),o(!0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return n&&t?Object(v.jsx)("div",{children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("div",{className:"align-content-center",children:Object(v.jsx)(y,{handleClick:J,handleChange:function(e){e.preventDefault(),e.target.value<100&&e.target.value>0&&(console.log("value accepted"),E(e.target.value))},title:"Choose number of Recs"})}),Object(v.jsxs)("div",{className:"counter",children:[Object(v.jsx)(S,{count:A,title:"Artists"}),Object(v.jsx)(S,{count:P,title:"Tracks"})]}),Object(v.jsxs)("div",{className:"counter",children:[Object(v.jsx)(w,{query:x,setQuery:m,category:t,setCounter:I,counters:A,title:"Artists"}),Object(v.jsx)(k,{query:j,setQuery:h,category:n,setCounter:N,counters:P,title:"Songs"})]})]})}):Object(v.jsx)("div",{})},A=function(e){var t=e.selectedPlay,n=e.handleChange,a=e.handleClick,r=e.playlists,c=e.type;return"apple"===c?Object(v.jsxs)("form",{children:[Object(v.jsxs)("select",{value:t,onChange:n,children:[Object(v.jsx)("option",{value:"none",children:"None Selected"}),r.map((function(e){return Object(v.jsx)("option",{"data-testid":"option",value:e.id,children:e.attributes.name})}))]}),Object(v.jsx)("button",{onClick:a,children:"Add to chosen playlist"})]}):"spotify"===c?Object(v.jsxs)("form",{children:[Object(v.jsxs)("select",{value:t,onChange:n,children:[Object(v.jsx)("option",{value:"none",children:"None Selected"}),r.items.map((function(e){return Object(v.jsx)("option",{"data-testid":"option",value:e.id,children:e.name})}))]}),Object(v.jsx)("button",{onClick:a,children:"Add to chosen playlist"})]}):Object(v.jsx)("div",{})},I=function(e){var t=e.recs,n=e.userID,r=e.token,c=e.setPlayID,s=e.setDone,o=e.setError,p=Object(a.useState)(""),d=Object(u.a)(p,2),j=d[0],h=d[1],b=function(e){e.preventDefault(),h(e.target.value)},f=function(){var e=Object(l.a)(i.a.mark((function e(a){var l,u,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,l=t.tracks.map((function(e){return e.uri})),u=l.join(","),e.next=6,O.createPlaylist(j,"users/".concat(n,"/playlists"),r);case 6:return p=e.sent,e.next=9,O.request("POST","playlists/".concat(p.data.id,"/tracks?uris=").concat(u),r);case 9:d=e.sent,c(p.data.id),s(!0),console.log("create play",d),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),o(!0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a=t.tracks.map((function(e){return e.external_ids.isrc})),r=a.join(","),e.next=6,O.getAppleSongIds(r);case 6:return o=e.sent,console.log(o,"songIds"),e.next=10,O.createApplePlaylist(j,o);case 10:l=e.sent,c(l.data[0].id),console.log("id",l.data[0].id),s(!0),console.log("playID",l),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"destination",children:[Object(v.jsx)(y,{handleClick:f,handleChange:b,title:"Create a spotify playlist or select an existing one"}),Object(v.jsx)(y,{handleClick:x,handleChange:b,title:"Create an apple music playlist or select an existing one"})]})},D=function(e){var t=e.recs,n=e.playlists,r=e.setPlayID,c=e.setDone,s=e.token,o=e.applePlay,p=(e.appleToken,Object(a.useState)("None")),d=Object(u.a)(p,2),h=d[0],b=d[1],f=function(e){e.preventDefault(),b(e.target.value)},x=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a=t.tracks.map((function(e){return e.uri})),o=a.join(","),e.next=6,O.request("POST","playlists/".concat(h,"/tracks?uris=").concat(o),s);case 6:l=e.sent,r(h),c(!0),console.log("add to play",l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,s,o,l,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a=t.tracks.map((function(e){return e.external_ids.isrc})),s=a.join(","),window.MusicKit.configure({developerToken:j.appleAuth,app:{name:"My Cool Web App"},declarativeMarkup:!0}),o=window.MusicKit.getInstance(),e.next=8,o.authorize();case 8:return l=e.sent,console.log(l,o.isAuthorized),e.next=12,O.getAppleSongIds(s);case 12:return u=e.sent,console.log(u),e.next=16,O.addAppleSongs(h,l,u);case 16:p=e.sent,console.log(p),console.log(h),r(h),c(!0),e.next=25;break;case 23:e.prev=23,e.t0=e.catch(1);case 25:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"destination",children:[Object(v.jsx)(A,{playlists:n,handleChange:f,handleClick:x,selectedPlay:h,type:"spotify"}),Object(v.jsx)(A,{playlists:o,handleChange:f,handleClick:m,selectedPlay:h,type:"apple"})]})},T=function(e){var t=e.recs,n=e.token,a=e.userID,r=e.setDone,c=e.setPlayID,s=e.playlists,o=e.applePlay,i=e.appleToken;return t&&n&&s?(console.log(s.items),Object(v.jsxs)("div",{children:[Object(v.jsx)(I,{recs:t,setPlayID:c,setDone:r,userID:a,token:n,appleToken:i}),Object(v.jsx)(D,{recs:t,playlists:s,setDone:r,setPlayID:c,token:n,applePlay:o,appleToken:i})]})):Object(v.jsx)("div",{})},P=function(e){var t=e.recs;return t?Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:"Track List"}),Object(v.jsx)("ul",{children:t.tracks.map((function(e){return Object(v.jsxs)("li",{children:[e.name,Object(v.jsx)("img",{src:e.album.images[2].url,alt:"album art"})]},e.id)}))})]}):Object(v.jsx)("div",{})},N=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),s=Object(u.a)(c,2),o=s[0],p=s[1],d=Object(a.useState)(null),h=Object(u.a)(d,2),b=h[0],f=h[1],x=Object(a.useState)(null),y=Object(u.a)(x,2),k=y[0],w=y[1],S=Object(a.useState)(),A=Object(u.a)(S,2),I=A[0],D=A[1],N=Object(a.useState)(!1),M=Object(u.a)(N,2),z=M[0],q=M[1],E=Object(a.useState)(""),J=Object(u.a)(E,2),F=J[0],G=J[1],Q=Object(a.useState)(!1),U=Object(u.a)(Q,2),_=U[0],B=U[1],R=Object(a.useState)(),L=Object(u.a)(R,2),K=L[0],V=L[1],X=Object(a.useState)(),Y=Object(u.a)(X,2),H=Y[0],W=Y[1],Z=Object(a.useState)(),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(u.a)(ne,2),re=ae[0],ce=ae[1];Object(a.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,c,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.href.includes("access")&&(t=window.location.href.split("="),a=t[1].split("&"),r(a[0])),e.next=3,O.request("GET","me",n);case 3:return c=e.sent,e.next=6,O.request("GET","users/".concat(c.data.id,"/playlists"),n);case 6:return s=e.sent,V(s.data),D(c.data.id),window.MusicKit.configure({developerToken:j.appleAuth,app:{name:"My Cool Web App"},declarativeMarkup:!0}),o=window.MusicKit.getInstance(),e.next=13,o.authorize();case 13:return l=e.sent,console.log(l,o.isAuthorized),te(l),e.next=18,O.fetchApplePlaylists(l);case 18:u=e.sent,W(u.data),console.log(u.data);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]);return Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"header",children:Object(v.jsx)("h1",{children:"Spotify Recommendation Finder"})})}),re&&Object(v.jsx)("h3",{children:"Sorry, something went wrong, please refresh the page"}),!z&&Object(v.jsxs)(v.Fragment,{children:[!n&&Object(v.jsx)(m,{setToken:r}),n&&Object(v.jsx)(g,{title:"Search",setTrack:w,setName:f,token:n,setError:ce}),Object(v.jsx)(C,{name:b,track:k,setRecs:p,token:n,setDoneSearch:q,setError:ce})]}),Object(v.jsx)(T,{recs:o,token:n,userID:I,setDone:B,setPlayID:G,playlists:K,applePlay:H,appleToken:ee}),!F&&Object(v.jsx)(P,{recs:o}),_&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){window.location="https://open.spotify.com/playlist/".concat(F)},children:"Listen on Spotify"})," ",Object(v.jsx)("button",{children:"Make Another Playlist"})," ",Object(v.jsx)("button",{onClick:function(){window.location="https://music.apple.com/library/playlist/".concat(F)},children:"Listen on Apple Music"})]}),Object(v.jsx)("p",{children:"1. Login to Spotify"}),Object(v.jsx)("p",{children:"2. Search for songs and artists to base recommendations off of"}),Object(v.jsx)("p",{children:"3. Choose how many songs you want"}),Object(v.jsx)("p",{children:"4. Add recommendations to an existing playlist or create a new one(Supports Apple Music and Spotify)"})]})};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(N,{})}),document.getElementById("root"))},6:function(e){e.exports=JSON.parse('{"appleAuth":"eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Ik1aOVUzUDdZNFUifQ.eyJpYXQiOjE2MjcxNTk0ODAsImV4cCI6MTY0MjcxMTQ4MCwiaXNzIjoiQkJEMzU1UDY3MyJ9.usovMXfwltc8dwAH2jNWOH8kh3UU7AKz7Ie0nIHFjaud-pq0JRo2hZdjFJVG8wu2ijAQFPG-n50lq2-jdpYATg"}')}},[[51,1,2]]]);
//# sourceMappingURL=main.53d6e0b0.chunk.js.map